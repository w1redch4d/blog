+++
title = 'Parser Workflow'
date = 2025-04-14T11:39:29+05:30
draft = true
+++


# Compilation Parser And AST

Parsing is the next phase after [Lexical Analysis](Lexical-Analysis.md) . It takes the stream of tokens generated by the lexer as input and constructs a hierarchical structure (like an [AST](https://en.wikipedia.org/wiki/Abstract_syntax_tree)) that represents the grammatical structure of the program according to the language's syntax and [rules](https://262.ecma-international.org/6.0/) . The [**parser**](https://v8-docs.vercel.app/parser_8cc_source.html) checks if the sequence of tokens forms a valid program in the language.

In V8's pipeline, the parser receives the tokens from the lexer and produces the [Abstract Syntax Tree (AST)](https://v8-docs.vercel.app/ast_8cc_source.html) . This AST serves as the foundation for subsequent stages like bytecode generation by the Ignition interpreter and optimizations by the JIT compilers (Sparkplug, Maglev, Turbofan).

{{< mermaid >}}
graph TD
    A[Tokens] --> B(Parser);
    B --> C(Abstract Syntax Tree);
{{< /mermaid >}}


## Parser in V8

In the V8 JavaScript engine, once the scanner completes its job, the next critical component in the compilation pipeline is the **"parser"**. The scanner produces a [sequence of tokens](https://w1redch4d.github.io/post/lexical-analysis/#token-class), which serve as the primary input for the parser. As the parser works through the process of compiling JavaScript code, it continuously interacts with the scanner, frequently invoking it to supply the next set of tokens needed for parsing. To understand this interaction more deeply, we can examine a specific part of the parserâ€™s implementation. A good starting point for this exploration is the [`DoParseProgram`](https://v8-docs.vercel.app/parser_8cc_source.html#l00714) function, which plays a central role in initiating the parsing of JavaScript programs. By analyzing this function, we can gain valuable insights into how the parser operates and how it coordinates with the scanner during the compilation process.

The `result` variable [defined in the function](https://v8-docs.vercel.app/parser_8cc_source.html#l00725) in this case will later hold the Abstract Syntax Tree (AST). The AST is a structured representation of the JavaScript code that the parser builds as it processes the tokens. Once the `DoParseProgram()` function finishes its execution, the complete AST is generated and stored in this `result` variable. In the context of our example, after the AST has been successfully constructed, the program proceeds to invoke the next method in the compilation sequence, which continues the process based on the parsed and structured code.